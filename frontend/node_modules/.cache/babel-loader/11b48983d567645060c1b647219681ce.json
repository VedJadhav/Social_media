{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import axios from\"axios\";const API_URL=\"http://127.0.0.1:8000\";// Ensure this matches your FastAPI backend URL\nconst App=()=>{const[posts,setPosts]=useState([]);const[newPost,setNewPost]=useState({user:\"\",content:\"\"});const[commentTexts,setCommentTexts]=useState({});// Store all comment inputs in an object\n// Fetch posts from FastAPI when component loads\nuseEffect(()=>{fetchPosts();},[]);const fetchPosts=async()=>{try{const response=await axios.get(`${API_URL}/posts`);setPosts(response.data);}catch(error){console.error(\"Error fetching posts:\",error);alert(\"Failed to fetch posts. Check if backend is running.\");}};// Handle adding a new post\nconst handlePostSubmit=async e=>{e.preventDefault();if(!newPost.user||!newPost.content){alert(\"Fields cannot be empty!\");return;}try{await axios.post(`${API_URL}/posts`,newPost);setNewPost({user:\"\",content:\"\"});// Reset form\nfetchPosts();// Refresh posts\n}catch(error){console.error(\"Error adding post:\",error);alert(\"Error adding post. Check backend logs.\");}};// Handle Like Function\nconst handleLike=async postId=>{try{await axios.post(`${API_URL}/posts/${postId}/like`);fetchPosts();}catch(error){console.error(\"Error liking post:\",error);alert(\"Error liking post. Check backend logs.\");}};// Handle Comment Function\nconst handleComment=async postId=>{var _commentTexts$postId;if(!((_commentTexts$postId=commentTexts[postId])===null||_commentTexts$postId===void 0?void 0:_commentTexts$postId.trim()))return;try{await axios.post(`${API_URL}/posts/${postId}/comment`,{user:\"Guest\",text:commentTexts[postId]});setCommentTexts({...commentTexts,[postId]:\"\"});// Clear input for this post\nfetchPosts();}catch(error){console.error(\"Error adding comment:\",error);alert(\"Error adding comment. Check backend logs.\");}};return/*#__PURE__*/React.createElement(\"div\",{style:{padding:\"20px\",maxWidth:\"600px\",margin:\"auto\"}},/*#__PURE__*/React.createElement(\"h1\",null,\"Social Media Platform\"),/*#__PURE__*/React.createElement(\"form\",{onSubmit:handlePostSubmit,style:{marginBottom:\"20px\"}},/*#__PURE__*/React.createElement(\"input\",{type:\"text\",placeholder:\"Your Name\",value:newPost.user,onChange:e=>setNewPost({...newPost,user:e.target.value}),required:true,style:{display:\"block\",width:\"100%\",marginBottom:\"10px\",padding:\"8px\"}}),/*#__PURE__*/React.createElement(\"textarea\",{placeholder:\"What's on your mind?\",value:newPost.content,onChange:e=>setNewPost({...newPost,content:e.target.value}),required:true,style:{display:\"block\",width:\"100%\",marginBottom:\"10px\",padding:\"8px\"}}),/*#__PURE__*/React.createElement(\"button\",{type:\"submit\",style:{padding:\"10px 15px\",cursor:\"pointer\"}},\"Add Post\")),posts.length>0?posts.map(post=>/*#__PURE__*/React.createElement(\"div\",{key:post.id,style:{border:\"1px solid #ddd\",padding:\"10px\",marginBottom:\"10px\"}},/*#__PURE__*/React.createElement(\"h3\",null,post.user),/*#__PURE__*/React.createElement(\"p\",null,post.content),/*#__PURE__*/React.createElement(\"p\",null,\"\\u2764\\uFE0F \",post.likes,\" Likes\"),/*#__PURE__*/React.createElement(\"button\",{onClick:()=>handleLike(post.id),style:{marginRight:\"10px\",cursor:\"pointer\"}},\"Like\"),/*#__PURE__*/React.createElement(\"div\",{style:{marginTop:\"10px\"}},/*#__PURE__*/React.createElement(\"input\",{type:\"text\",placeholder:\"Write a comment...\",value:commentTexts[post.id]||\"\",onChange:e=>setCommentTexts({...commentTexts,[post.id]:e.target.value}),onKeyDown:e=>{if(e.key===\"Enter\"){handleComment(post.id);}},style:{width:\"80%\",padding:\"5px\"}})),post.comments&&post.comments.length>0&&/*#__PURE__*/React.createElement(\"div\",{style:{marginTop:\"10px\"}},/*#__PURE__*/React.createElement(\"h4\",null,\"Comments:\"),post.comments.map((comment,index)=>/*#__PURE__*/React.createElement(\"p\",{key:index,style:{margin:\"5px 0\"}},/*#__PURE__*/React.createElement(\"strong\",null,comment.user,\":\"),\" \",comment.text))))):/*#__PURE__*/React.createElement(\"p\",null,\"No posts yet. Add a post above!\"));};export default App;","map":{"version":3,"names":["React","useEffect","useState","axios","API_URL","App","posts","setPosts","newPost","setNewPost","user","content","commentTexts","setCommentTexts","fetchPosts","response","get","data","error","console","alert","handlePostSubmit","e","preventDefault","post","handleLike","postId","handleComment","_commentTexts$postId","trim","text","createElement","style","padding","maxWidth","margin","onSubmit","marginBottom","type","placeholder","value","onChange","target","required","display","width","cursor","length","map","key","id","border","likes","onClick","marginRight","marginTop","onKeyDown","comments","comment","index"],"sources":["/Users/vedjadhav/Social_media/frontend/src/App.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport axios from \"axios\";\n\nconst API_URL = \"http://127.0.0.1:8000\"; // Ensure this matches your FastAPI backend URL\n\nconst App = () => {\n  const [posts, setPosts] = useState([]);\n  const [newPost, setNewPost] = useState({ user: \"\", content: \"\" });\n  const [commentTexts, setCommentTexts] = useState({}); // Store all comment inputs in an object\n\n  // Fetch posts from FastAPI when component loads\n  useEffect(() => {\n    fetchPosts();\n  }, []);\n\n  const fetchPosts = async () => {\n    try {\n      const response = await axios.get(`${API_URL}/posts`);\n      setPosts(response.data);\n    } catch (error) {\n      console.error(\"Error fetching posts:\", error);\n      alert(\"Failed to fetch posts. Check if backend is running.\");\n    }\n  };\n\n  // Handle adding a new post\n  const handlePostSubmit = async (e) => {\n    e.preventDefault();\n    if (!newPost.user || !newPost.content) {\n      alert(\"Fields cannot be empty!\");\n      return;\n    }\n    try {\n      await axios.post(`${API_URL}/posts`, newPost);\n      setNewPost({ user: \"\", content: \"\" }); // Reset form\n      fetchPosts(); // Refresh posts\n    } catch (error) {\n      console.error(\"Error adding post:\", error);\n      alert(\"Error adding post. Check backend logs.\");\n    }\n  };\n\n  // Handle Like Function\n  const handleLike = async (postId) => {\n    try {\n      await axios.post(`${API_URL}/posts/${postId}/like`);\n      fetchPosts();\n    } catch (error) {\n      console.error(\"Error liking post:\", error);\n      alert(\"Error liking post. Check backend logs.\");\n    }\n  };\n\n  // Handle Comment Function\n  const handleComment = async (postId) => {\n    if (!commentTexts[postId]?.trim()) return;\n    try {\n      await axios.post(`${API_URL}/posts/${postId}/comment`, {\n        user: \"Guest\",\n        text: commentTexts[postId],\n      });\n      setCommentTexts({ ...commentTexts, [postId]: \"\" }); // Clear input for this post\n      fetchPosts();\n    } catch (error) {\n      \n      console.error(\"Error adding comment:\", error);\n      alert(\"Error adding comment. Check backend logs.\");\n    }\n  };\n\n  return (\n    <div style={{ padding: \"20px\", maxWidth: \"600px\", margin: \"auto\" }}>\n      <h1>Social Media Platform</h1>\n\n      {/* New Post Form */}\n      <form onSubmit={handlePostSubmit} style={{ marginBottom: \"20px\" }}>\n        <input\n          type=\"text\"\n          placeholder=\"Your Name\"\n          value={newPost.user}\n          onChange={(e) => setNewPost({ ...newPost, user: e.target.value })}\n          required\n          style={{ display: \"block\", width: \"100%\", marginBottom: \"10px\", padding: \"8px\" }}\n        />\n        <textarea\n          placeholder=\"What's on your mind?\"\n          value={newPost.content}\n          onChange={(e) => setNewPost({ ...newPost, content: e.target.value })}\n          required\n          style={{ display: \"block\", width: \"100%\", marginBottom: \"10px\", padding: \"8px\" }}\n        ></textarea>\n        <button type=\"submit\" style={{ padding: \"10px 15px\", cursor: \"pointer\" }}>\n          Add Post\n        </button>\n      </form>\n\n      {/* Posts Section */}\n      {posts.length > 0 ? (\n        posts.map((post) => (\n          <div key={post.id} style={{ border: \"1px solid #ddd\", padding: \"10px\", marginBottom: \"10px\" }}>\n            <h3>{post.user}</h3>\n            <p>{post.content}</p>\n            <p>❤️ {post.likes} Likes</p>\n\n            {/* Like Button */}\n            <button onClick={() => handleLike(post.id)} style={{ marginRight: \"10px\", cursor: \"pointer\" }}>\n              Like\n            </button>\n\n            {/* Comment Section */}\n            <div style={{ marginTop: \"10px\" }}>\n              <input\n                type=\"text\"\n                placeholder=\"Write a comment...\"\n                value={commentTexts[post.id] || \"\"}\n                onChange={(e) =>\n                  setCommentTexts({ ...commentTexts, [post.id]: e.target.value })\n                }\n                onKeyDown={(e) => {\n                  if (e.key === \"Enter\") {\n                    handleComment(post.id);\n                  }\n                }}\n                style={{ width: \"80%\", padding: \"5px\" }}\n              />\n            </div>\n\n            {/* Display Comments */}\n            {post.comments && post.comments.length > 0 && (\n              <div style={{ marginTop: \"10px\" }}>\n                <h4>Comments:</h4>\n                {post.comments.map((comment, index) => (\n                  <p key={index} style={{ margin: \"5px 0\" }}>\n                    <strong>{comment.user}:</strong> {comment.text}\n                  </p>\n                ))}\n              </div>\n            )}\n          </div>\n        ))\n      ) : (\n        <p>No posts yet. Add a post above!</p>\n      )}\n    </div>\n  );\n};\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}