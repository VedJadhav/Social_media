(this["webpackJsonpsocial-media-frontend"]=this["webpackJsonpsocial-media-frontend"]||[]).push([[0],{10:function(e,t,n){e.exports=n(23)},18:function(e,t,n){},23:function(e,t,n){"use strict";n.r(t);var a=n(2),r=n.n(a),o=n(9),l=n.n(o),c=(n(18),n(25));const s="http://127.0.0.1:8000";var i=()=>{const[e,t]=Object(a.useState)([]),[n,o]=Object(a.useState)({user:"",content:""}),[l,i]=Object(a.useState)({});Object(a.useEffect)(()=>{d()},[]);const d=async()=>{try{const e=await c.a.get(s+"/posts");t(e.data)}catch(e){console.error("Error fetching posts:",e),alert("Failed to fetch posts. Check if backend is running.")}};return r.a.createElement("div",{style:{padding:"20px",maxWidth:"600px",margin:"auto"}},r.a.createElement("h1",null,"Social Media Platform"),r.a.createElement("form",{onSubmit:async e=>{if(e.preventDefault(),n.user&&n.content)try{await c.a.post(s+"/posts",n),o({user:"",content:""}),d()}catch(t){console.error("Error adding post:",t),alert("Error adding post. Check backend logs.")}else alert("Fields cannot be empty!")},style:{marginBottom:"20px"}},r.a.createElement("input",{type:"text",placeholder:"Your Name",value:n.user,onChange:e=>o({...n,user:e.target.value}),required:!0,style:{display:"block",width:"100%",marginBottom:"10px",padding:"8px"}}),r.a.createElement("textarea",{placeholder:"What's on your mind?",value:n.content,onChange:e=>o({...n,content:e.target.value}),required:!0,style:{display:"block",width:"100%",marginBottom:"10px",padding:"8px"}}),r.a.createElement("button",{type:"submit",style:{padding:"10px 15px",cursor:"pointer"}},"Add Post")),e.length>0?e.map(e=>r.a.createElement("div",{key:e.id,style:{border:"1px solid #ddd",padding:"10px",marginBottom:"10px"}},r.a.createElement("h3",null,e.user),r.a.createElement("p",null,e.content),r.a.createElement("p",null,"\u2764\ufe0f ",e.likes," Likes"),r.a.createElement("button",{onClick:()=>(async e=>{try{await c.a.post(`${s}/posts/${e}/like`),d()}catch(t){console.error("Error liking post:",t),alert("Error liking post. Check backend logs.")}})(e.id),style:{marginRight:"10px",cursor:"pointer"}},"Like"),r.a.createElement("div",{style:{marginTop:"10px"}},r.a.createElement("input",{type:"text",placeholder:"Write a comment...",value:l[e.id]||"",onChange:t=>i({...l,[e.id]:t.target.value}),onKeyDown:t=>{"Enter"===t.key&&(async e=>{var t;if(null===(t=l[e])||void 0===t?void 0:t.trim())try{await c.a.post(`${s}/posts/${e}/comment`,{user:"Guest",text:l[e]}),i({...l,[e]:""}),d()}catch(n){console.error("Error adding comment:",n),alert("Error adding comment. Check backend logs.")}})(e.id)},style:{width:"80%",padding:"5px"}})),e.comments&&e.comments.length>0&&r.a.createElement("div",{style:{marginTop:"10px"}},r.a.createElement("h4",null,"Comments:"),e.comments.map((e,t)=>r.a.createElement("p",{key:t,style:{margin:"5px 0"}},r.a.createElement("strong",null,e.user,":")," ",e.text))))):r.a.createElement("p",null,"No posts yet. Add a post above!"))};var d=e=>{e&&e instanceof Function&&n.e(3).then(n.bind(null,26)).then(t=>{let{getCLS:n,getFID:a,getFCP:r,getLCP:o,getTTFB:l}=t;n(e),a(e),r(e),o(e),l(e)})};l.a.createRoot(document.getElementById("root")).render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(i,null))),d()}},[[10,1,2]]]);
//# sourceMappingURL=main.da70c82c.chunk.js.map